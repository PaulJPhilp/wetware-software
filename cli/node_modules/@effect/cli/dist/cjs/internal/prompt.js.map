{"version":3,"file":"prompt.js","names":["Terminal","_interopRequireWildcard","require","Doc","Effect","Effectable","_Function","Pipeable","Ref","_action","_getRequireWildcardCache","e","WeakMap","r","t","__esModule","default","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","PromptSymbolKey","PromptTypeId","exports","Symbol","for","proto","CommitPrototype","_Output","_","commit","run","pipe","pipeArguments","arguments","isPrompt","allTupled","arg","length","succeed","map","x","result","curr","flatMap","tuple","all","Array","isArray","entries","value","rest","slice","key","prompt","record","custom","initialState","handlers","op","create","_tag","render","process","clear","dual","self","f","onSuccess","terminal","makeStateRef","isEffect","make","ref","loop","action","state","msg","orDie","display","zipRight","readInput","input","Action","NextFrame","ensuring","cursorShow","style"],"sources":["../../../src/internal/prompt.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}