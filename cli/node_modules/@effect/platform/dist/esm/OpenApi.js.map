{"version":3,"file":"OpenApi.js","names":["AST","Schema","Context","dual","Option","HttpApi","HttpApiSchema","HttpMethod","JsonSchema","Identifier","Tag","Title","Version","Description","License","Security","ExternalDocs","annotations","context","empty","identifier","undefined","add","title","description","version","license","security","externalDocs","annotate","self","annotations_","base","Object","setPrototypeOf","getPrototypeOf","merge","assign","fromApi","api","spec","openapi","info","getOrElse","paths","tags","components","schemas","securitySchemes","securityMap","Map","securityCount","registerSecurity","has","get","count","id","_tag","scheme","makeSecurityScheme","set","map","getOption","apiSecurity","push","reflect","onGroup","group","tag","name","onEndpoint","endpoint","errors","mergedAnnotations","successAST","successEncoding","successStatus","path","replace","method","toLowerCase","op","operationId","parameters","responses","getDescriptionOrIdentifier","payloadSchema","pipe","filter","hasBody","schema","requestBody","content","getMultipart","ast","make","required","contentType","isSome","pathSchema","value","entries","properties","forEach","jsonSchema","in","includes","headersSchema","status","getEmptyDecodeable","meta","type","key","to","flatMapNullable","DescriptionAnnotationId","IdentifierAnnotationId"],"sources":["../../src/OpenApi.ts"],"sourcesContent":[null],"mappings":"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","ignoreList":[]}