@tailwind base;
@tailwind components;
@tailwind utilities;

/* Tailwind v3: remove v4 @theme; fonts are configured via next/font */

@layer base {
  :root {
    /* Brand colors - RGB values for alpha support */
    --color-silver: 248 248 248; /* #f8f8f8 */
    --color-charcoal: 33 33 33; /* #212121 */
    --color-orange: 255 122 0; /* #ff7a00 */

    /* Z-index scale for consistent layering */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-footer: 9998;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
    --z-header: 9999;
  }

  .dark {
    /* Dark theme brand colors - adjust for contrast */
    --color-silver: 248 248 248; /* light bg */
    --color-charcoal: 24 24 24; /* dark bg */
    --color-orange: 255 150 60; /* warmer accent in dark */
  }

  /* Base typography styles */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-sans font-bold tracking-tight;
  }

  /* Prose styling with brand colors */
  .prose {
    @apply max-w-none dark:prose-invert prose-sm md:prose-base;
  }

  .prose h1,
  .prose h2,
  .prose h3,
  .prose h4,
  .prose h5,
  .prose h6 {
    @apply font-sans;
  }

  .prose h1 {
    @apply text-3xl md:text-4xl;
  }

  .prose h2 {
    @apply text-2xl md:text-3xl;
  }

  .prose p {
    @apply font-serif;
  }

  /* Code blocks */
  .prose pre {
    @apply bg-[#111] text-silver border border-white/10 rounded-lg px-4 py-3 font-mono;
  }

  .prose code {
    @apply bg-orange/10 text-charcoal dark:text-silver rounded px-1 py-0.5 text-sm font-mono;
  }

  .prose pre code {
    @apply bg-transparent text-silver p-0;
  }

  /* Brand color utilities */
  .text-brand {
    @apply text-charcoal dark:text-silver;
  }

  .text-muted {
    @apply text-charcoal/60 dark:text-silver/60;
  }

  .text-subtle {
    @apply text-charcoal/40 dark:text-silver/40;
  }

  .bg-brand {
    @apply bg-silver dark:bg-charcoal;
  }

  .bg-elevated {
    @apply bg-white dark:bg-charcoal/50;
  }

  .border-brand {
    @apply border-charcoal/20 dark:border-white/20;
  }

  .border-subtle {
    @apply border-charcoal/5 dark:border-white/5;
  }

  /* Link styling */
  .link-brand {
    @apply text-orange hover:underline underline-offset-4 hover:opacity-80;
  }

  .link-brand-subtle {
    @apply text-orange/90 hover:text-orange underline underline-offset-4 decoration-orange/40 hover:decoration-orange/60;
  }

  /* Inline emphasis */
  .emphasis-brand {
    @apply bg-orange/10 text-charcoal dark:text-silver rounded px-1;
  }

  /* Dividers */
  .divider-brand {
    @apply border-t border-charcoal/20 dark:border-white/20;
  }

  /* Focus states */
  .focus-ring {
    @apply outline-none ring-2 ring-orange/70 ring-offset-2 ring-offset-silver dark:ring-offset-charcoal;
  }

  /* Smooth scrolling */
  html {
    scroll-behavior: smooth;
  }

  /* Base layout */
  body {
    min-height: 100vh;
    overflow-x: hidden;
  }

  body {
    color: var(--foreground);
    background: radial-gradient(
      ellipse at top,
      var(--gradient-start) 0%,
      var(--gradient-end) 100%
    );
    background-attachment: fixed;
    @apply font-sans;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  * {
    box-sizing: border-box;
    padding: 0;
    margin: 0;
  }

  /* Utility for isolation when we need a new stacking context */
  .isolation-isolate {
    isolation: isolate;
  }

  a {
    color: inherit;
    text-decoration: none;
  }

  @media (prefers-color-scheme: dark) {
    html {
      color-scheme: dark;
    }
  }

  .series-article-list {
    font-size: 0.875rem; /* text-sm equivalent */
    line-height: 1.25rem;
    letter-spacing: -0.01em;
  }
}

/* Modern theme system using OKLCH color space for better perceptual uniformity */

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);

  /* Gradient variables for subtle background depth */
  --gradient-start: oklch(0.99 0 0);
  --gradient-end: oklch(0.97 0 0);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(0.3 0 0);
  --input: oklch(0.25 0 0);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(0.3 0 0);
  --sidebar-ring: oklch(0.556 0 0);

  /* Dark mode gradient - subtle depth without overwhelming */
  --gradient-start: oklch(0.16 0 0);
  --gradient-end: oklch(0.145 0 0);
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply text-foreground;
  }
}
